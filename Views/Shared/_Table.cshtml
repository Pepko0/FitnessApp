@using FitnessApp.Models.ViewModels
@model TableViewModel

<div class="table-responsive admin-table">
    <table class="table table-hover align-middle">
        <thead>
            <tr>
                @foreach (var col in Model.Columns)
                {
                    <th>@col.Header</th>
                }

                @if (Model.Actions?.Any() == true)
                {
                    <th class="col-actions">Akcje</th>
                }
            </tr>
        </thead>

        <tbody>
            @foreach (var item in Model.Items)
            {
                <tr>
                    @foreach (var col in Model.Columns)
                    {
                        <td>@(col.ValueSelector?.Invoke(item))</td>
                    }

                    @if (Model.Actions?.Any() == true)
                    {
                        <td class="col-actions">
                            @foreach (var action in Model.Actions)
                            {
                                if (action.IsModal)
                                {
                                    <button type="button"
                                            class="@action.CssClass"
                                            data-bs-toggle="modal"
                                            data-bs-target="#@action.ModalId"
                                            data-id="@action.IdSelector?.Invoke(item)"
                                            data-name="@action.NameSelector?.Invoke(item)">
                                        @if (!string.IsNullOrEmpty(action.Icon))
                                        {
                                            <i class="bi @action.Icon me-1"></i>
                                        }
                                        @action.LabelSelector?.Invoke(item)
                                    </button>
                                }
                                else
                                {
                                    <a href="@action.UrlSelector?.Invoke(item)" class="@action.CssClass">
                                        @if (!string.IsNullOrEmpty(action.Icon))
                                        {
                                            <i class="bi @action.Icon me-1"></i>
                                        }
                                        @action.LabelSelector?.Invoke(item)
                                    </a>
                                }
                            }
                        </td>
                    }
                </tr>
            }
        </tbody>
    </table>
</div>

@if (!string.IsNullOrEmpty(Model.ModalPartial))
{
    @await Html.PartialAsync(Model.ModalPartial, Model.ModalModel)
}
